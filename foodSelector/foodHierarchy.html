<!DOCTYPE html >
<html lang="en">
<head>
  <!-- ? Juan Lanus juan dot lanus at gmail -->
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en">
  <title>Food selector</title>
  <script type="text/javascript" src="res/jquery/jquery-1.8.2.js"></script>
  <script type="text/javascript" src="res/jquery/ui/jquery-ui-1.9.1.js"></script>
  <link rel="stylesheet" href="res/jquery/themes/base/jquery-ui-1.9.1.css" type="text/css">
  <script type="text/javascript" src="../common/jl.js"></script>
  <link type="text/css" rel="stylesheet" media="screen" href="../common/jl.css" />
  <style>
    body {  font-family:"Trebuchet MS", "sans-serif"; }
    #outputList { float:right; font-size:75%; min-width:20em; background-color:rgb(255,255,192); margin-top:80px; }
    #outputList ul { list-style-type:none; padding-left: 12px; }
    #foods { font-size:80%; background-color:rgb(222,222,222);    border-color: transparent; }
    #foods ul { border-color: transparent; }
    #foods li { background-color:rgb(222,222,222); }
    #foods .selected { color:rgb(128,128,128); cursor:default; display:block, }
    .ui-menu { width: 200px; }
  </style>

</head>

<body style="overflow-y:scroll;">
  <div id="outputList">
    <ul id="selectedFoods">
    </ul>
    &nbsp;
  </div>
  <div id="blah">
    <h1>Build a selection list</h1>
    <p>This shows how to manage a rather long list of items allowing the user to select the desired ones with minimum interaction: a single click per item. </p>
  </div>
  <ul id="foods">
    <li><a href="#">Fruits</a>
    <ul>
      <li><a href="#">Apples</a></li>
      <li><a href="#">Apricots</a></li>
      <li><a href="#">Bananas</a></li>
      <li><a href="#">Cherries</a></li>
      <li><a href="#">Grapefruit</a></li>
      <li><a href="#">Grapes</a></li>
      <li><a href="#">Kiwi fruit</a></li>
      <li><a href="#">Lemons</a></li>
      <li><a href="#">Limes</a></li>
      <li><a href="#">Mangoes</a></li>
      <li><a href="#">Nectarines</a></li>
      <li><a href="#">Oranges</a></li>
      <li><a href="#">Peaches</a></li>
      <li><a href="#">Pears</a></li>
      <li><a href="#">Papaya</a></li>
      <li><a href="#">Pineapple</a></li>
      <li><a href="#">Plums</a></li>
      <li><a href="#">Prunes</a></li>
      <li><a href="#">Raisins</a></li>
      <li><a href="#">Tangerines</a></li>
      <li><a href="#">Berries</a>
      <ul>
        <li><a href="#">strawberries</a></li>
        <li><a href="#">blueberries</a></li>
        <li><a href="#">raspberries</a></li>
      </ul>
      </li>
      <li><a href="#">Melons</a>
      <ul>
        <li><a href="#">cantaloupe</a></li>
        <li><a href="#">honeydew</a></li>
        <li><a href="#">watermelon</a></li>
      </ul>
      </li>
      <li><a href="#">Mixed fruits</a>
      <ul>
        <li><a href="#">fruit cocktail</a></li>
      </ul>
      </li>
      <li><a href="#">100% Fruit juice</a>
      <ul>
        <li><a href="#">orange</a></li>
        <li><a href="#">apple</a></li>
        <li><a href="#">grape</a></li>
        <li><a href="#">grapefruit</a></li>
      </ul>
      </li>
    </ul>
    </li>
    <li><a href="#">Vegetables</a>
    <ul>
      <li><a href="#">Dark Green Vegetables</a>
      <ul>
        <li><a href="#">bok choy</a></li>
        <li><a href="#">broccoli</a></li>
        <li><a href="#">collard greens</a></li>
        <li><a href="#">dark green leafy lettuce</a></li>
        <li><a href="#">kale</a></li>
        <li><a href="#">mesclun</a></li>
        <li><a href="#">mustard greens</a></li>
        <li><a href="#">romaine lettuce</a></li>
        <li><a href="#">spinach</a></li>
        <li><a href="#">turnip greens</a></li>
        <li><a href="#">watercress</a></li>
      </ul>
      </li>
      <li><a href="#">Starchy vegetables</a>
      <ul>
        <li><a href="#">cassava</a></li>
        <li><a href="#">corn</a></li>
        <li><a href="#">fresh cowpeas</a></li>
        <li><a href="#">field peas</a></li>
        <li><a href="#">black-eyed peas (not dry)</a></li>
        <li><a href="#">green bananas</a></li>
        <li><a href="#">green peas</a></li>
        <li><a href="#">green lima beans</a></li>
        <li><a href="#">plantains</a></li>
        <li><a href="#">potatoes</a></li>
        <li><a href="#">taro</a></li>
        <li><a href="#">water chestnuts</a></li>
      </ul>
      </li>
      <li><a href="#">Red &amp; orange vegetables</a>
      <ul>
        <li><a href="#">acorn squash</a></li>
        <li><a href="#">butternut squash</a></li>
        <li><a href="#">carrots</a></li>
        <li><a href="#">hubbard squash</a></li>
        <li><a href="#">pumpkin</a></li>
        <li><a href="#">red peppers</a></li>
        <li><a href="#">sweet potatoes</a></li>
        <li><a href="#">tomatoes</a></li>
        <li><a href="#">tomato juice</a></li>
      </ul>
      </li>
      <li><a href="#">Beans and peas</a>
      <ul>
        <li><a href="#">black beans</a></li>
        <li><a href="#">black-eyed peas (mature, dry)</a></li>
        <li><a href="#">garbanzo beans (chickpeas)</a></li>
        <li><a href="#">kidney beans</a></li>
        <li><a href="#">lentils</a></li>
        <li><a href="#">navy beans</a></li>
        <li><a href="#">pinto beans</a></li>
        <li><a href="#">soy beans</a></li>
        <li><a href="#">split peas</a></li>
        <li><a href="#">white beans</a></li>
      </ul>
      </li>
      <li><a href="#">Other vegetables</a>
      <ul>
        <li><a href="#">artichokes</a></li>
        <li><a href="#">asparagus</a></li>
        <li><a href="#">avocado</a></li>
        <li><a href="#">bean sprouts</a></li>
        <li><a href="#">beets</a></li>
        <li><a href="#">Brussels sprouts</a></li>
        <li><a href="#">cabbage</a></li>
        <li><a href="#">cauliflower</a></li>
        <li><a href="#">celery</a></li>
        <li><a href="#">cucumbers</a></li>
        <li><a href="#">eggplant</a></li>
        <li><a href="#">green beans</a></li>
        <li><a href="#">green peppers</a></li>
        <li><a href="#">iceberg (head) lettuce</a></li>
        <li><a href="#">mushrooms</a></li>
        <li><a href="#">okra</a></li>
        <li><a href="#">onions</a></li>
        <li><a href="#">turnips</a></li>
        <li><a href="#">wax beans</a></li>
        <li><a href="#">zucchini</a></li>
      </ul>
      </li>
    </ul>
    </li>
    <li><a href="#">Grains</a>
    <ul>
      <li><a href="#">Whole Grains</a>
      <ul>
        <li><a href="#">amaranth</a></li>
        <li><a href="#">brown rice</a></li>
        <li><a href="#">buckwheat</a></li>
        <li><a href="#">bulgur (cracked wheat)</a></li>
        <li><a href="#">millet</a></li>
        <li><a href="#">oatmeal</a></li>
        <li><a href="#">popcorn</a></li>
        <li><a href="#">rolled oats</a></li>
        <li><a href="#">quinoa</a></li>
        <li><a href="#">sorghum</a></li>
        <li><a href="#">triticale</a></li>
        <li><a href="#">whole grain barley</a></li>
        <li><a href="#">whole grain cornmeal</a></li>
        <li><a href="#">whole rye</a></li>
        <li><a href="#">whole wheat bread</a></li>
        <li><a href="#">whole wheat crackers</a></li>
        <li><a href="#">whole wheat pasta</a></li>
        <li><a href="#">whole wheat sandwich buns and rolls</a></li>
        <li><a href="#">whole wheat tortillas</a></li>
        <li><a href="#">wild rice</a></li>
      </ul>
      <li><a href="#">Ready-to-eat breakfast cereals</a>
      <ul>
        <li><a href="#">whole wheat cereal flakes</a></li>
        <li><a href="#">muesli</a></li>
      </ul>
      </li>
      <li><a href="#">Refined Grains</a>
      <ul>
        <li><a href="#">cornbread</a></li>
        <li><a href="#">corn tortillas</a></li>
        <li><a href="#">couscous</a></li>
        <li><a href="#">crackers</a></li>
        <li><a href="#">flour tortillas</a></li>
        <li><a href="#">grits</a></li>
        <li><a href="#">noodles</a></li>
        <li><a href="#">pitas</a></li>
        <li><a href="#">pretzels</a></li>
        <li><a href="#">white bread</a></li>
        <li><a href="#">white sandwich buns and rolls</a></li>
        <li><a href="#">white rice</a></li>
        <li><a href="#">Pastas</a>
        <ul>
          <li><a href="#">spaghetti</a></li>
          <li><a href="#">maccaroni</a></li>
        </ul>
        </li>
        <li><a href="#">Ready-to-eat breakfast cereals</a>
        <ul>
          <li><a href="#">corn flakes</a></li>
        </ul>
        </li>
      </ul>
      </li>
    </ul>
    </li>
    <li><a href="#">Protein foods</a>
    <ul>
      <li><a href="#">Meats</a>
      <ul>
        <li><a href="#">Lean cuts of:</a>
        <ul>
          <li><a href="#">beef</a></li>
          <li><a href="#">ham</a></li>
          <li><a href="#">lamb</a></li>
          <li><a href="#">pork</a></li>
          <li><a href="#">veal</a></li>
        </ul>
        </li>
        <li><a href="#">Game Meats</a>
        <ul>
          <li><a href="#">bison</a></li>
          <li><a href="#">rabbit</a></li>
          <li><a href="#">venison</a></li>
        </ul>
        </li>    
        <li><a href="#">Lean Ground Meats</a>
        <ul>
          <li><a href="#">beef</a></li>
          <li><a href="#">pork</a></li>
          <li><a href="#">lamb</a></li>
        </ul>
        </li>    
        <li><a href="#">Organ Meats</a>
        <ul>
          <li><a href="#">liver</a></li>
          <li><a href="#">giblets</a></li>
        </ul>
        </li> 
      </ul>
      </li>
      <li><a href="#">Poultry</a>
      <ul>
        <li><a href="#">chicken</a></li>
        <li><a href="#">duck</a></li>
        <li><a href="#">goose</a></li>
        <li><a href="#">turkey</a></li>
        <li><a href="#">ground chicken and turkey</a></li>
      </ul>
      </li>
      <li><a href="#">Eggs</a>
      <ul>
        <li><a href="#">chicken eggs</a></li>
        <li><a href="#">duck eggs</a></li>
      </ul>
      </li>
      <li><a href="#">Beans and Peas</a>
      <ul>
        <li><a href="#">bean burgers</a></li>
        <li><a href="#">black beans</a></li>
        <li><a href="#">black-eyed peas</a></li>
        <li><a href="#">chickpeas (garbanzo beans)</a></li>
        <li><a href="#">falafel</a></li>
        <li><a href="#">kidney beans</a></li>
        <li><a href="#">lentils</a></li>
        <li><a href="#">lima beans (mature)</a></li>
        <li><a href="#">navy beans</a></li>
        <li><a href="#">pinto beans</a></li>
        <li><a href="#">soy beans</a></li>
        <li><a href="#">split peas</a></li>
        <li><a href="#">white beans</a></li>
      </ul>
      </li>
      <li><a href="#">Processed Soy Products</a>
      <ul>
        <li><a href="#">tofu (bean curd made from soybeans)</a></li>
        <li><a href="#">veggie burgers</a></li>
        <li><a href="#">tempeh</a></li>
        <li><a href="#">texturized vegetable protein (TVP)</a></li>
      </ul>
      </li>
      <li><a href="#">Nuts and Seeds</a>
      <ul>
        <li><a href="#">almonds</a></li>
        <li><a href="#">cashews</a></li>
        <li><a href="#">hazelnuts (filberts)</a></li>
        <li><a href="#">mixed nuts</a></li>
        <li><a href="#">peanuts</a></li>
        <li><a href="#">peanut butter</a></li>
        <li><a href="#">pecans</a></li>
        <li><a href="#">pistachios</a></li>
        <li><a href="#">pumpkin seeds</a></li>
        <li><a href="#">sesame seeds</a></li>
        <li><a href="#">sunflower seeds</a></li>
        <li><a href="#">walnuts</a></li>
      </ul>
      </li>
      <li><a href="#">Seafood</a>
      <ul>
        <li><a href="#">Finfish such as:</a>
        <ul>
          <li><a href="#">catfish</a></li>
          <li><a href="#">cod</a></li>
          <li><a href="#">flounder</a></li>
          <li><a href="#">haddock</a></li>
          <li><a href="#">halibut</a></li>
          <li><a href="#">herring</a></li>
          <li><a href="#">mackerel</a></li>
          <li><a href="#">pollock</a></li>
          <li><a href="#">porgy</a></li>
          <li><a href="#">salmon</a></li>
          <li><a href="#">sea bass</a></li>
          <li><a href="#">snapper</a></li>
          <li><a href="#">swordfish</a></li>
          <li><a href="#">trout</a></li>
          <li><a href="#">tuna</a></li>
        </ul>
        </li>
        <li><a href="#">Shellfish such as:</a>
        <ul>
          <li><a href="#">clams</a></li>
          <li><a href="#">crab</a></li>
          <li><a href="#">crayfish</a></li>
          <li><a href="#">lobster</a></li>
          <li><a href="#">mussels</a></li>
          <li><a href="#">octopus</a></li>
          <li><a href="#">oysters</a></li>
          <li><a href="#">scallops</a></li>
          <li><a href="#">squid (calamari)</a></li>
          <li><a href="#">shrimp</a></li>
        </ul>
        </li>
        <li><a href="#">Canned fish such as:</a>
        <ul>
          <li><a href="#">anchovies</a></li>
          <li><a href="#">clams</a></li>
          <li><a href="#">tuna</a></li>
          <li><a href="#">sardines</a></li>
        </ul>
        </li>
      </ul>
      </li>
    </ul>
    </li>
  </ul>
</body>

<script>
$( "#foods" ).menu( { "borderColorActive": "transparent" } );

  $('#foods li').mouseenter(function() {
    var $this = $(this);
    // alert($this.text() + $this.children().children().length);
  });

  $('#foods li').click(function(e) {
    // disregard clicks in group items
    // click hit an A element inside a LI, check if LI has a dangling UL
    if($(this).children('UL').length > 0) {
      return false;
    }
    // traverse DOM upwards highlighting and collecting path data
    var selectedItems = [];                     // stash the hierarchy names
    var $p = $(e.target).parent();              // current LI element (target is A)
    do {                                        // loop upwards highlighting A's
      if ($p.get(0).tagName === 'LI') {
        $p.children('A').addClass('selected');  // highlight this group name
        selectedItems.push($p.children('A').text()); // stash the text for later
      }
      var $p = $p.parent();                     // and move up ...
    } while ($p.attr('id') !== 'foods');        // until top DIV container

    // replicate the selected item structure in the output looping over the ULs
    var $currentUL = $('UL#selectedFoods');     // current UL, initially top
    var n = selectedItems.length;
    for(var j = n; j > 0; j--) {
      var theText = selectedItems[j - 1];   // texts are in inverted order
      console.log('' + j + ' ' + theText);
      // search LIs for one containing the text
      var foundAt = -1;                         // index of matching LI
      $currentUL.children('LI').each(
        function(i) {
          console.log( $(this)[0].firstChild.textContent + '    ' + theText);
          if( $(this)[0].firstChild.textContent == theText) {
            foundAt = i;
            $currentUL = $(this).children('UL:first-child');
            return false;
          } else {
            return;
          }
        }
      );
      if (foundAt === -1) {                     // not found: add it
        var $theNewLI = $('<li>' + theText + '</li>'); 
        $theNewLI.appendTo($currentUL);
        // if not the leaf element add a UL for the next iteration
        if(j > 1) {
          $currentUL = $('<UL />')
          $currentUL.appendTo($theNewLI);
        }
      }
/* build a hierarchy thus: 
$currentUL     HTML built
               <div id="outputList">
     1           <ul id="selectedFoods">
                   <li>Vegetables
     2               <ul>
                       <li>Dark Green Vegetables
     3                   <ul>
                           <li>Broccoli</li>
                         </ul>
                       </li>
                     </ul>
                   </li>
                 </ul>
               </div>
*/
    }
    return false;
  });

</script>
</html>
